### 8.索引分类
> 索引的本质是一种数据结构。             
  (1).根据底层数据结构划分                
  索引是提高查询效率的数据结构，而能够提高查询效率的数据结构有很多，如二叉搜索树，红黑树，跳表，哈希表(散列表)等，
  而MySQL中用到了B+Tree和散列表（Hash表）作为索引的底层数据结构(其实也用到了跳表实现全文索引)。                         
  hash索引                
  MySQL并没有显式支持Hash索引，而是作为内部的一种优化。具体在Innodb存储引擎里，会监控对表上二级索引的查找，
  如果发现某二级索引被频繁访问，二级索引成为热数据，就为之建立hash索引。因此，在MySQL的Innodb里，对于热点的数据会自动生成Hash索引。
  这种hash索引，根据其使用的场景特点，也叫自适应Hash索引。              
  B+树索引             
  B+Tree是MySQL索引的基本实现方式。除了全文索引、hash索引，Innodb、MyISAM的索引都是通过B+树实现的。               
  (2).根据索引字段个数划分                
  为了能应对不同的数据检索需求，索引既可以仅包含一个字段，也可以同时包含多个字段。单个字段组成的索引可以称为单值索引，否则称之为复合索引，也称为组合索引或多值索引。                 
  复合索引的索引的数据顺序跟字段的顺序相关，包含多个值的索引中，如果当前面字段的值重复时，将会按照其后面的值进行排序。                    
  使用覆盖索引的前提是字段长度比较短，对于值长度较长的字段则不适合使用覆盖索引，原因有很多，比如索引一般存储在内存中，如果占用空间较大，则可能会从磁盘中加载，影响性能。                   
  (3).根据是否是在主键上建立的索引进行划分                    
  主键索引              
  MySQL中是根据主键来组织数据的，所以每张表都必须有主键索引，主键索引只能有一个，不能为null同时必须保证唯一性。建表时如果没有指定主键索引，则会自动生成一个隐藏的字段作为主键索引。             
  辅助索引                  
  如果不是主键索引，则就可以称之为非主键索引，又可以称之为辅助索引或者二级索引。主键索引的叶子节点存储了完整的数据行，
  而非主键索引的叶子节点存储的则是主键索引值，通过非主键索引查询数据时，会先查找到主键索引，然后再到主键索引上去查找对应的数据。                   
  表user具有三列：id，age，name，create_time，id是主键，（age，create_time,，name）建立辅助索引。执行如下sql语句:select name from user where age>2 order by create_time desc。                  
  正常的话，查询分两步：               
  按照辅助索引，查找到记录的主键，                          
  按照主键主键索引里查找记录，返回name。             
  但实际上，辅助索引节点是按照age，create_time，name建立的，索引信息里完全包含所要查询的信息，如果能从辅助索引里返回name信息，则第二步是完全没有必要的，可以极大提升查询速度。             
  按照这种思想Innodb里针对使用辅助索引的查询场景做了优化，叫覆盖索引。                 
  (4).根据数据与索引的存储关联性划分                                  
  根据数据与索引的存储关联性，可以分为聚簇索引和非聚簇索引（也叫聚集索引和非聚集索引）。聚簇索引也叫簇类索引，
  是一种对磁盘上实际数据重新组织以按指定的一个或多个列的值排序。整个简洁的说法，这俩的区别就是索引的存储顺序和数据的存储顺序是否是关系的，有关就是聚簇索引，无关就是非聚簇索引。具体实现方式根据索引的数据结构不同会有所不同。下面以B+树实现的索引为例，举例来说明聚簇索引和非聚簇索引。                          
  聚簇索引                                
  一个表只能有一个聚集索引,聚集索引的顺序与数据真实的物理存储顺序一致。           
> 聚集索引优点是查询速度快，因为一旦具有第一个索引值的记录被找到，具有连续索引值的记录也一定物理的紧跟其后;             
> 缺点是对表进行修改速度较慢，这是为了保持表中的记录的物理顺序与索引的顺序一致，而把记录插入到数据页的相应位置，必须在数据页中进行数据重排，降低了执行速度。在插入新记录时数据文件为了维持B+Tree的特性而频繁的分裂调整，十分低效。             
  建议使用聚集索引的场合为:a.某列包含了小数目的不同值;b.排序和范围查找。                
> Innodb的主键索引，非叶子节点存储的是索引指针，叶子节点存储的是既有索引也有数据，是典型的聚簇索引（索引和数据的存储顺序是强相关的。因此是典型的聚簇索引），如图：                   
  ![mysql6](http://github.com/xidianlina/practice/raw/master//mysql_practice/picture/mysql6.png)        
> 非聚簇索引                 
  MyISAM中索引和数据文件分开存储，B+Tree的叶子节点存储的是数据存放的地址，而不是具体的数据，是典型的非聚簇索引；
  换言之，数据可以在磁盘上随便找地方存，索引也可以在磁盘上随便找地方存，只要叶子节点记录对了数据存放地址就行。
  因此，索引存储顺序和数据存储关系毫无关联，是典型的非聚簇索引，另外Inndob里的辅助索引也是非聚簇索引。
> 建议使用非聚集索引的场合为：a.此列包含了大数目的不同值；b.频繁更新的列             
> ![mysql7](http://github.com/xidianlina/practice/raw/master//mysql_practice/picture/mysql7.png)        
  (5).其他分类                  
  唯一索引                  
  不允许具有索引值相同的行，从而禁止重复的索引或键值。系统在创建该索引时检查是否有重复的键值，
  并在每次使用INSERT或UPDATE语句添加数据时进行检查， 如果有重复的值，则会操作失败，抛出异常。                  
  主键索引一定是唯一索引，而唯一索引不一定是主键索引。唯一索引可以理解为仅仅是将索引设置一个唯一性的属性。                  
  全文索引              
  在MySQL 5.6版本以前,只有MyISAM存储引擎支持全文引擎。在5.6版本中,InnoDB加入了对全文索引的支持,但是不支持中文全文索引。              
  在5.7.6版本,MySQL内置了ngram全文解析器,用来支持亚洲语种的分词。主要用来利用关键词查询文本，不是MySQL的主要面向场景，使用较少。 
  ![mysql8](http://github.com/xidianlina/practice/raw/master//mysql_practice/picture/mysql8.png)                           
>
> 参考 https://zhuanlan.zhihu.com/p/115746492

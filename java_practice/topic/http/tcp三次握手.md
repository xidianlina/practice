### 5.tcp为什么要三次握手，两次不行吗？为什么？
>![tcp](http://github.com/xidianlina/practice/raw/master//java_practice/topic/picture/tcp.png)              
>为什么建立连接协议是三次握手，而关闭连接却是四次握手呢？                    
 因为服务端的LISTEN状态下的SOCKET当收到SYN报文的建连请求后，它可以把ACK和SYN（ACK起应答作用，而SYN起同步作用）放在一个报文里来发送。                        
 但关闭连接时，当收到客户端的FIN报文通知时，它仅仅表示客户端没有数据发送了；但未必服务端的数据都全部发送给客户端了，服务端可能还需要发送一些数据给客户端之后，
 再发送FIN报文给客户端来表示同意现在可以关闭连接了，所以关闭连接的ACK报文和FIN报文多数情况下都是分开发送的。                     
 为什么TIME_WAIT状态还需要等2MSL后才能返回到CLOSED状态？              
 因为虽然双方都同意关闭连接了，而且握手的4个报文也都发送完毕，按理可以直接回到CLOSED 状态(就好比从SYN_SENT 状态到ESTABLISH 状态那样)，但是必须假想网络是不可靠的，
 无法保证客户端最后发送的ACK报文一定会被对方收到，就是说对方处于LAST_ACK 状态下的SOCKET可能会因为超时未收到ACK报文，而重发FIN报文，所以这个TIME_WAIT状态的作用就是用来重发可能丢失的ACK报文。                   
 tcp 为什么要三次握手，两次不行吗？为什么？                        
 为了实现可靠数据传输， TCP 协议的通信双方， 都必须维护一个序列号， 以标识发送出去的数据包中， 哪些是已经被对方收到的。 三次握手的过程即是通信双方相互告知序列号起始值， 并确认对方已经收到了序列号起始值的必经步骤。
 如果只是两次握手， 至多只有连接发起方的起始序列号能被确认， 另一方选择的序列号则得不到确认。                                 

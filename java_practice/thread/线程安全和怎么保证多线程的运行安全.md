### 14.什么是线程安全？在java程序中怎么保证多线程的运行安全？
> 如果一段代码所在的进程中有多个线程在同时运行，而这些线程可能会同时运行这段代码。如果每次运行结果和单线程运行的结果是一样的，而且其他的变量的值也和预期的是一样的，就是线程安全的。                 
>               
> 线程安全在三个方面体现：                  
  原子性：提供互斥访问，同一时刻只能有一个线程对数据进行操作，（atomic,synchronized）；                  
  可见性：一个线程对主内存的修改可以及时地被其他线程看到，（synchronized,volatile）；                  
  有序性：一个线程观察其他线程中的指令执行顺序，由于指令重排序，该观察结果一般杂乱无序，（happens-before原则）。                    
>               
> 保证线程安全的方法:            
> (1).使用线程安全的类；         
> (2).使用synchronized同步代码块，或者用Lock锁；由于线程安全问题，使用synchronized同步代码块时，
> 当两个并发线程访问同一个对象object中的这个synchronized(this)同步代码块时，一个时间内只能有一个线程得到执行。
> 另一个线程必须等待当前线程执行完这个代码块以后才能执行该代码块。                          
> (3).多线程并发情况下，线程共享的变量改为方法局部级变量；            
> (4).使用线程局部变量ThreadLocal。                                                                                                                                  
